# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/lugh

# AI Assistants
# Claude - Choose one:
CLAUDE_CODE_OAUTH_TOKEN=sk-ant-oat01-...
# OR
# CLAUDE_API_KEY=sk-ant-...

# Codex Authentication (get from ~/.codex/auth.json after running 'codex login')
# Required if using Codex as AI assistant
# On Linux/Mac: cat ~/.codex/auth.json
# On Windows: type %USERPROFILE%\.codex\auth.json
CODEX_ID_TOKEN=eyJ...
CODEX_ACCESS_TOKEN=eyJ...
CODEX_REFRESH_TOKEN=rt_...
CODEX_ACCOUNT_ID=6a6a7ba6-...

# Default AI Assistant (claude | codex)
# Used for new conversations when no codebase specified
DEFAULT_AI_ASSISTANT=claude

# GitHub Token (for GitHub CLI and commands)
GH_TOKEN=ghp_...
GITHUB_TOKEN=ghp_...  # Same as GH_TOKEN, used by adapter

# GitHub Webhooks
WEBHOOK_SECRET=your_random_secret_string

# GitHub User Whitelist (optional - comma-separated usernames)
# When set, only listed GitHub users can trigger webhook processing
# When empty/unset, webhooks are processed for all users
# Usernames are case-insensitive (octocat == Octocat)
GITHUB_ALLOWED_USERS=octocat,monalisa

# Platforms - set the tokens for the ones you want to use
# Telegram - <get token from @BotFather>
TELEGRAM_BOT_TOKEN=
# Discord - <get token from Discord Developer Portal>
DISCORD_BOT_TOKEN=

# Slack Bot (Socket Mode)
# Create app at https://api.slack.com/apps - see docs/slack-setup.md
SLACK_BOT_TOKEN=xoxb-...
SLACK_APP_TOKEN=xapp-...

# Slack User Whitelist (optional - comma-separated user IDs)
# When set, only listed Slack users can interact with the bot
# When empty/unset, bot responds to all users
# Get user IDs: Slack profile > ... > Copy member ID
SLACK_ALLOWED_USER_IDS=U1234ABCD,W5678EFGH

# Discord User Whitelist (optional - comma-separated user IDs)
# When set, only listed Discord users can interact with the bot
# When empty/unset, bot responds to all users
# Get user IDs in Discord: Settings > Advanced > Developer Mode, then right-click user > Copy ID
DISCORD_ALLOWED_USER_IDS=123456789012345678,987654321098765432

# Telegram User Whitelist (optional - comma-separated user IDs)
# When set, only listed Telegram users can interact with the bot
# When empty/unset, bot responds to all users
# Get your user ID by messaging @userinfobot on Telegram
TELEGRAM_ALLOWED_USER_IDS=123456789,987654321

# Platform Streaming Mode (stream | batch)
TELEGRAM_STREAMING_MODE=stream  # stream (default) | batch
DISCORD_STREAMING_MODE=batch    # batch (default) | stream
SLACK_STREAMING_MODE=batch      # batch (default) | stream
GITHUB_STREAMING_MODE=batch     # batch (default) | stream

# Bot Display Name (shown in batch mode "starting" message)
BOT_DISPLAY_NAME=CodingAgent      # e.g., "My-bot", "CodeBot", etc.

# GitHub Bot Mention (optional - for @mention detection in GitHub issues/PRs)
# When set, the bot will respond to this mention name instead of the default @remote-agent
# If not set, falls back to BOT_DISPLAY_NAME, then defaults to "remote-agent"
GITHUB_BOT_MENTION=remote-agent

# Optional
PORT=3000

# ============================================
# Lugh Directory Configuration (NEW)
# ============================================
# All Lugh-managed files go in ~/.lugh/ by default
# Override with LUGH_HOME to use a custom location
# LUGH_HOME=~/.lugh

# Concurrency
MAX_CONCURRENT_CONVERSATIONS=10  # Maximum concurrent AI conversations (default: 10)

# Builtin Command Templates
# Set to 'false' to disable loading the maintained workflow commands
# (plan, implement, commit, review-pr, etc.) that ship with this repo.
# These are updated by the repo maintainers with each release.
LOAD_BUILTIN_COMMANDS=true  # true (default) | false

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable features incrementally.
# Format: FEATURE_<NAME>=true|false
# Features disabled by default are experimental or beta.

# --- STABLE FEATURES (enabled by default) ---
FEATURE_TELEGRAM_ADAPTER=true       # Telegram bot integration
FEATURE_SLACK_ADAPTER=true          # Slack bot integration
FEATURE_DISCORD_ADAPTER=true        # Discord bot integration
FEATURE_GITHUB_ADAPTER=true         # GitHub webhook integration

# --- BETA FEATURES (disabled by default) ---
# Phone Vibecoding V1 - Approval workflow via Telegram
FEATURE_PHONE_APPROVALS=false       # Telegram inline buttons for tool approval
FEATURE_BLOCKING_APPROVALS=false    # Block execution until approval (requires PHONE_APPROVALS)

# --- EXPERIMENTAL FEATURES (disabled by default) ---
# Multi-Agent Pool (Experimental - PostgreSQL-based, no Redis required)
FEATURE_AGENT_POOL=false            # Multi-agent pool manager (PostgreSQL NOTIFY/LISTEN)
FEATURE_AGENT_HEARTBEAT=false       # Agent health monitoring (requires AGENT_POOL)
FEATURE_REDIS_MESSAGING=false       # Optional: Redis for 50+ agents (see FEAT-019)

# Multi-LLM Support (Experimental)
FEATURE_MULTI_LLM=false             # Support for 8+ LLM providers
FEATURE_LLM_CONFIG_UI=false         # Web dashboard for LLM configuration (requires MULTI_LLM)

# Swarm Coordination (Experimental)
FEATURE_SWARM_COORDINATION=false    # Distribute tasks across agent swarm (requires AGENT_POOL, MULTI_LLM)
FEATURE_TASK_DECOMPOSER=false       # AI task decomposition (requires SWARM_COORDINATION)

# Verification & Recovery (Experimental)
FEATURE_EXTERNAL_VERIFICATION=false # Verify agent claims via git/tests (requires AGENT_POOL)
FEATURE_RECOVERY_SYSTEM=false       # 3-attempt retry with escalation (requires AGENT_POOL)

# Desktop App (Experimental)
FEATURE_ELECTRON_APP=false          # Electron desktop application (requires MULTI_LLM)

# Cost Tracking
FEATURE_COST_TRACKING=false         # Track token usage and costs (requires MULTI_LLM)
FEATURE_COST_LIMITS=false           # Enforce cost limits (requires COST_TRACKING)

# --- DEPRECATED (will be removed) ---
FEATURE_LEGACY_SINGLE_AGENT=true    # Original single-agent mode (still default)

# ============================================
# EXPERIMENTAL CONFIGURATION
# ============================================
# These only apply when experimental features are enabled

# Agent Pool Settings (PostgreSQL-based)
AGENT_POOL_SIZE=4                   # Number of agents in pool (3-12)
AGENT_HEARTBEAT_INTERVAL=30000      # Heartbeat interval in ms (30 seconds)
AGENT_STALE_THRESHOLD=120           # Seconds before agent considered dead
AGENT_TASK_TIMEOUT=300              # Seconds before reassigning stuck tasks

# Redis (Optional - for FEAT-019 upgrade path when scaling to 50+ agents)
# Leave commented out for now. PostgreSQL handles 3-12 agents fine.
REDIS_URL=redis://localhost:6379

# Cost Limits
COST_LIMIT_PER_SESSION=10.00        # Max cost per session in USD
COST_LIMIT_PER_DAY=100.00           # Max cost per day in USD
